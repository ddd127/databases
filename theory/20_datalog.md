# 20. Datalog и рекурсия
Здесь подробнее: https://neerc.ifmo.ru/wiki/index.php?title=Datalog_%D0%B8_%D1%80%D0%B5%D0%BA%D1%83%D1%80%D1%81%D0%B8%D1%8F

**Программа:**     
* Набор определений отношений   
* Результат – тело одного из отношений     

**Программа:**    
* Атомы 
1) Реляционные атомы   
Отношения рассматриваются как предикаты    
Кортеж принадлежит отношению: R(x1, x2, ..., xn)   
Кортеж не принадлежит отношению: ¬R(x1, x2, ..., xn)  
Вместо имен – порядок аргументов    
2) Арифметические атомы    
Сравнение двух выражений    
* Определение отношения    
1) Синтаксис    
Список: Отношение(x1, x2, ..., xn) :- цель.    
Каждая цель – последовательность атомов   
2) В отношение входят кортежи, удовлетворяющие хотя бы одной цели    
3) Кортеж удовлетворяет цели – удовлетворяет всем атомам цели    
* Ограничение отношений    
Чтобы не было бесконечных отношенияй, каждая переменная должна входить в неотрицательный реляционный атом   

*Datalog реляционно полон:*     
1) πA1,...,An(R) = Q(A1, ..., An) :- R(A1, ..., An, _, ..., _).    
2) σθ(R) = :- R(A1, ..., An), θ.     
3) A = :- R(A1, ..., An).    
4) R1∪R2 = Q(A1, ..., An) :- R1(A1, ..., An).   
Q(A1, ..., An) :- R2(A1, ..., An)       
5) R1∖R2 = Q(A1, ..., An) :- R1(A1, ..., An), ¬R2(A1, ..., An).          
6) R1×R2 = Q(A1, ..., An, B1, ..., Bm) :- R1(A1, ..., An), R2(B1, ..., Bm).     
7) R1⋈R2 =  Q(A1, ..., An, B1, ..., Bm, C1, ..., Cl) :- R1(A1, ..., An, B1, ..., Bm), R2(B1, ..., Bm, C1, ..., Cl).   


**Рекурсивные запросы:**   
Ищется минимальная неподвижная точка - минимальное по включению множество, такое что левая и правая части совпадают     
*Алгоритм поиска:* 
1) Инициализируем нерекурсивными данными      
2) Пока есть следствия, пополняем ими     

Запрет на отрицание в йиклах   

